<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Comprehensive Student Dashboard</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
        <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
</head>
<body>
    <div class="dashboard">
        <header class="header">
            <h1>Comprehensive Student Dashboard</h1>
            <p>Academic Performance, Placement Statistics, and Faculty Evaluations</p>
            <!-- Global error message container -->
            <div class="global-error-container"></div>
            <div class="tab-navigation">
                <button class="tab-button" onclick="showTab('exam-tab')">Academic Performance</button>
                <button class="tab-button" onclick="showTab('placement-tab')">Placement Statistics</button>
                <button class="tab-button" onclick="showTab('faculty-tab')">Faculty Evaluations</button>
            </div>
        </header>

        <div class="main-content">
            <!-- Academic Performance Tab -->
            <div id="exam-tab" class="tab-content"> <!-- Add initial 'active' class here or let JS handle it -->
                <div class="section-title">
                    <h2>Academic Performance</h2>
                </div>

                <div class="summary-cards">
                    <div class="card">
                        <h3>Grade Distribution</h3>
                        <div class="chart-container">
                            <canvas id="gradeChart"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <h3>Internal vs External Marks</h3>
                        <div class="chart-container">
                            <canvas id="marksComparisonChart"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <h3>Semester Performance Trend</h3>
                        <div class="chart-container">
                            <canvas id="semesterChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="chart-row">
                    <div class="card wide-card">
                        <h3>Department Performance (Avg Marks)</h3>
                        <div class="chart-container">
                            <canvas id="departmentPerformanceChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="chart-row">
                    <div class="card"> <!-- Removed the second card from this row -->
                        <h3>Top Performing Subjects (Avg Marks)</h3>
                        <div class="chart-container">
                            <canvas id="topSubjectsChart"></canvas>
                        </div>
                    </div>
                    <!-- Card containing subjectAnalysisChart was REMOVED from here -->
                </div>
            </div>

            <!-- Placement Statistics Tab -->
            <div id="placement-tab" class="tab-content">
                <div class="section-title">
                    <h2>Placement Statistics</h2>
                </div>

                <div class="summary-cards">
                    <div class="card">
                        <h3>Placement Rate by Department</h3>
                        <div class="chart-container">
                            <canvas id="placementRateChart"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <h3>Average Package (LPA)</h3>
                        <div class="chart-container">
                            <canvas id="packageChart"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <h3>Gender Placement Comparison</h3>
                        <div class="chart-container">
                            <canvas id="genderPlacementChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="chart-row">
                    <div class="card wide-card">
                        <h3>CGPA vs Package Correlation</h3>
                        <div class="chart-container">
                            <canvas id="cgpaPackageChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="chart-row">
                    <div class="card">
                        <h3>Top Recruiting Companies</h3>
                        <div class="chart-container">
                            <canvas id="companiesChart"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <h3>Most In-Demand Skills</h3>
                        <div class="chart-container">
                            <canvas id="skillsChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Faculty Evaluations Tab -->
            <div id="faculty-tab" class="tab-content">
                <div class="section-title">
                    <h2>Faculty Evaluations</h2>
                </div>

                <div class="summary-cards">
                    <div class="card">
                        <h3>Average Ratings by Category</h3>
                        <div class="chart-container">
                            <canvas id="ratingsChart"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <h3>Department Teaching Ratings</h3>
                        <div class="chart-container">
                            <canvas id="deptRatingsChart"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <h3>Semester Rating Comparison</h3>
                        <div class="chart-container">
                            <canvas id="facultySemesterChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="chart-row">
                    <div class="card wide-card">
                        <h3>Overall Faculty Rating Trend (Yearly)</h3>
                        <div class="chart-container">
                            <canvas id="ratingTrendsChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="chart-row">
                    <div class="card">
                        <h3>Top Rated Faculty</h3>
                        <div class="chart-container">
                            <canvas id="topFacultyChart"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <h3>Top Rated Courses</h3>
                        <div class="chart-container">
                            <canvas id="courseRatingChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer class="footer">
            <p>Â© 2025 Comprehensive Student Dashboard | Data sourced from AWS S3</p>
        </footer>
    </div>

    <!-- Make sure script is loaded at the end -->
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>